#!/usr/bin/env node
import{execSync as Ni}from"child_process";import V from"node:path";import z from"node:fs";import gt from"readline";import vt from"events";import{fileURLToPath as Yi}from"url";const Q=Symbol("arg flag");class E extends Error{constructor(s,a){super(s),this.name="ArgError",this.code=a,Object.setPrototypeOf(this,E.prototype)}}function K(e,{argv:s=process.argv.slice(2),permissive:a=!1,stopAtPositional:t=!1}={}){if(!e)throw new E("argument specification object is required","ARG_CONFIG_NO_SPEC");const h={_:[]},v={},r={};for(const m of Object.keys(e)){if(!m)throw new E("argument key cannot be an empty string","ARG_CONFIG_EMPTY_KEY");if(m[0]!=="-")throw new E(`argument key must start with '-' but found: '${m}'`,"ARG_CONFIG_NONOPT_KEY");if(m.length===1)throw new E(`argument key must have a name; singular '-' keys are not allowed: ${m}`,"ARG_CONFIG_NONAME_KEY");if(typeof e[m]=="string"){v[m]=e[m];continue}let n=e[m],l=!1;if(Array.isArray(n)&&n.length===1&&typeof n[0]=="function"){const[i]=n;n=(c,p,o=[])=>(o.push(i(c,p,o[o.length-1])),o),l=i===Boolean||i[Q]===!0}else if(typeof n=="function")l=n===Boolean||n[Q]===!0;else throw new E(`type missing or not a function or valid array type: ${m}`,"ARG_CONFIG_VAD_TYPE");if(m[1]!=="-"&&m.length>2)throw new E(`short argument keys (with a single hyphen) must have only one character: ${m}`,"ARG_CONFIG_SHORTOPT_TOOLONG");r[m]=[n,l]}for(let m=0,n=s.length;m<n;m++){const l=s[m];if(t&&h._.length>0){h._=h._.concat(s.slice(m));break}if(l==="--"){h._=h._.concat(s.slice(m+1));break}if(l.length>1&&l[0]==="-"){const i=l[1]==="-"||l.length===2?[l]:l.slice(1).split("").map(c=>`-${c}`);for(let c=0;c<i.length;c++){const p=i[c],[o,u]=p[1]==="-"?p.split(/=(.*)/,2):[p,void 0];let b=o;for(;b in v;)b=v[b];if(!(b in r))if(a){h._.push(p);continue}else throw new E(`unknown or unexpected option: ${o}`,"ARG_UNKNOWN_OPTION");const[g,f]=r[b];if(!f&&c+1<i.length)throw new E(`option requires argument (but was followed by another short argument): ${o}`,"ARG_MISSING_REQUIRED_SHORTARG");if(f)h[b]=g(!0,b,h[b]);else if(u===void 0){if(s.length<m+2||s[m+1].length>1&&s[m+1][0]==="-"&&!(s[m+1].match(/^-?\d*(\.(?=\d))?\d*$/)&&(g===Number||typeof BigInt<"u"&&g===BigInt))){const d=o===b?"":` (alias for ${b})`;throw new E(`option requires argument: ${o}${d}`,"ARG_MISSING_REQUIRED_LONGARG")}h[b]=g(s[m+1],b,h[b]),++m}else h[b]=g(u,b,h[b])}}else h._.push(l)}return h}K.flag=e=>(e[Q]=!0,e),K.COUNT=K.flag((e,s,a)=>(a||0)+1),K.ArgError=E;var Hi=K,X={},ee,bt;function _(){if(bt)return ee;bt=1;const{FORCE_COLOR:e,NODE_DISABLE_COLORS:s,TERM:a}=process.env,t={enabled:!s&&a!=="dumb"&&e!=="0",reset:r(0,0),bold:r(1,22),dim:r(2,22),italic:r(3,23),underline:r(4,24),inverse:r(7,27),hidden:r(8,28),strikethrough:r(9,29),black:r(30,39),red:r(31,39),green:r(32,39),yellow:r(33,39),blue:r(34,39),magenta:r(35,39),cyan:r(36,39),white:r(37,39),gray:r(90,39),grey:r(90,39),bgBlack:r(40,49),bgRed:r(41,49),bgGreen:r(42,49),bgYellow:r(43,49),bgBlue:r(44,49),bgMagenta:r(45,49),bgCyan:r(46,49),bgWhite:r(47,49)};function h(m,n){let l=0,i,c="",p="";for(;l<m.length;l++)i=m[l],c+=i.open,p+=i.close,n.includes(i.close)&&(n=n.replace(i.rgx,i.close+i.open));return c+n+p}function v(m,n){let l={has:m,keys:n};return l.reset=t.reset.bind(l),l.bold=t.bold.bind(l),l.dim=t.dim.bind(l),l.italic=t.italic.bind(l),l.underline=t.underline.bind(l),l.inverse=t.inverse.bind(l),l.hidden=t.hidden.bind(l),l.strikethrough=t.strikethrough.bind(l),l.black=t.black.bind(l),l.red=t.red.bind(l),l.green=t.green.bind(l),l.yellow=t.yellow.bind(l),l.blue=t.blue.bind(l),l.magenta=t.magenta.bind(l),l.cyan=t.cyan.bind(l),l.white=t.white.bind(l),l.gray=t.gray.bind(l),l.grey=t.grey.bind(l),l.bgBlack=t.bgBlack.bind(l),l.bgRed=t.bgRed.bind(l),l.bgGreen=t.bgGreen.bind(l),l.bgYellow=t.bgYellow.bind(l),l.bgBlue=t.bgBlue.bind(l),l.bgMagenta=t.bgMagenta.bind(l),l.bgCyan=t.bgCyan.bind(l),l.bgWhite=t.bgWhite.bind(l),l}function r(m,n){let l={open:`\x1B[${m}m`,close:`\x1B[${n}m`,rgx:new RegExp(`\\x1b\\[${n}m`,"g")};return function(i){return this!==void 0&&this.has!==void 0?(this.has.includes(m)||(this.has.push(m),this.keys.push(l)),i===void 0?this:t.enabled?h(this.keys,i+""):i+""):i===void 0?v([m],[l]):t.enabled?h([l],i+""):i+""}}return ee=t,ee}var te,wt;function Li(){return wt||(wt=1,te=(e,s)=>{if(!(e.meta&&e.name!=="escape")){if(e.ctrl){if(e.name==="a")return"first";if(e.name==="c"||e.name==="d")return"abort";if(e.name==="e")return"last";if(e.name==="g")return"reset"}if(s){if(e.name==="j")return"down";if(e.name==="k")return"up"}return e.name==="return"||e.name==="enter"?"submit":e.name==="backspace"?"delete":e.name==="delete"?"deleteForward":e.name==="abort"?"abort":e.name==="escape"?"exit":e.name==="tab"?"next":e.name==="pagedown"?"nextPage":e.name==="pageup"?"prevPage":e.name==="home"?"home":e.name==="end"?"end":e.name==="up"?"up":e.name==="down"?"down":e.name==="right"?"right":e.name==="left"?"left":!1}}),te}var ie,yt;function re(){return yt||(yt=1,ie=e=>{const s=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),a=new RegExp(s,"g");return typeof e=="string"?e.replace(a,""):e}),ie}var se,xt;function R(){if(xt)return se;xt=1;const e="\x1B",s=`${e}[`,a="\x07",t={to(r,m){return m?`${s}${m+1};${r+1}H`:`${s}${r+1}G`},move(r,m){let n="";return r<0?n+=`${s}${-r}D`:r>0&&(n+=`${s}${r}C`),m<0?n+=`${s}${-m}A`:m>0&&(n+=`${s}${m}B`),n},up:(r=1)=>`${s}${r}A`,down:(r=1)=>`${s}${r}B`,forward:(r=1)=>`${s}${r}C`,backward:(r=1)=>`${s}${r}D`,nextLine:(r=1)=>`${s}E`.repeat(r),prevLine:(r=1)=>`${s}F`.repeat(r),left:`${s}G`,hide:`${s}?25l`,show:`${s}?25h`,save:`${e}7`,restore:`${e}8`},h={up:(r=1)=>`${s}S`.repeat(r),down:(r=1)=>`${s}T`.repeat(r)},v={screen:`${s}2J`,up:(r=1)=>`${s}1J`.repeat(r),down:(r=1)=>`${s}J`.repeat(r),line:`${s}2K`,lineEnd:`${s}K`,lineStart:`${s}1K`,lines(r){let m="";for(let n=0;n<r;n++)m+=this.line+(n<r-1?t.up():"");return r&&(m+=t.left),m}};return se={cursor:t,scroll:h,erase:v,beep:a},se}var ne,$t;function Vi(){if($t)return ne;$t=1;function e(n,l){var i=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=s(n))||l&&n&&typeof n.length=="number"){i&&(n=i);var c=0,p=function(){};return{s:p,n:function(){return c>=n.length?{done:!0}:{done:!1,value:n[c++]}},e:function(f){throw f},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,b;return{s:function(){i=i.call(n)},n:function(){var f=i.next();return o=f.done,f},e:function(f){u=!0,b=f},f:function(){try{!o&&i.return!=null&&i.return()}finally{if(u)throw b}}}}function s(n,l){if(!!n){if(typeof n=="string")return a(n,l);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(n,l)}}function a(n,l){(l==null||l>n.length)&&(l=n.length);for(var i=0,c=new Array(l);i<l;i++)c[i]=n[i];return c}const t=re(),h=R(),v=h.erase,r=h.cursor,m=n=>[...t(n)].length;return ne=function(n,l){if(!l)return v.line+r.to(0);let i=0;const c=n.split(/\r?\n/);var p=e(c),o;try{for(p.s();!(o=p.n()).done;){let u=o.value;i+=1+Math.floor(Math.max(m(u)-1,0)/l)}}catch(u){p.e(u)}finally{p.f()}return v.lines(i)},ne}var oe,St;function Mt(){if(St)return oe;St=1;const e={arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",tick:"\u2714",cross:"\u2716",ellipsis:"\u2026",pointerSmall:"\u203A",line:"\u2500",pointer:"\u276F"},s={arrowUp:e.arrowUp,arrowDown:e.arrowDown,arrowLeft:e.arrowLeft,arrowRight:e.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"\u221A",cross:"\xD7",ellipsis:"...",pointerSmall:"\xBB",line:"\u2500",pointer:">"};return oe=process.platform==="win32"?s:e,oe}var he,Ot;function Gi(){if(Ot)return he;Ot=1;const e=_(),s=Mt(),a=Object.freeze({password:{scale:1,render:n=>"*".repeat(n.length)},emoji:{scale:2,render:n=>"\u{1F603}".repeat(n.length)},invisible:{scale:0,render:n=>""},default:{scale:1,render:n=>`${n}`}}),t=n=>a[n]||a.default,h=Object.freeze({aborted:e.red(s.cross),done:e.green(s.tick),exited:e.yellow(s.cross),default:e.cyan("?")});return he={styles:a,render:t,symbols:h,symbol:(n,l,i)=>l?h.aborted:i?h.exited:n?h.done:h.default,delimiter:n=>e.gray(n?s.ellipsis:s.pointerSmall),item:(n,l)=>e.gray(n?l?s.pointerSmall:"+":s.line)},he}var le,Pt;function Ui(){if(Pt)return le;Pt=1;const e=re();return le=function(s,a){let t=String(e(s)||"").split(/\r?\n/);return a?t.map(h=>Math.ceil(h.length/a)).reduce((h,v)=>h+v):t.length},le}var ue,Tt;function Bi(){return Tt||(Tt=1,ue=(e,s={})=>{const a=Number.isSafeInteger(parseInt(s.margin))?new Array(parseInt(s.margin)).fill(" ").join(""):s.margin||"",t=s.width;return(e||"").split(/\r?\n/g).map(h=>h.split(/\s+/g).reduce((v,r)=>(r.length+a.length>=t||v[v.length-1].length+r.length+1<t?v[v.length-1]+=` ${r}`:v.push(`${a}${r}`),v),[a]).join(`
`)).join(`
`)}),ue}var ae,_t;function Ji(){return _t||(_t=1,ae=(e,s,a)=>{a=a||s;let t=Math.min(s-a,e-Math.floor(a/2));t<0&&(t=0);let h=Math.min(t+a,s);return{startIndex:t,endIndex:h}}),ae}var ce,Rt;function k(){return Rt||(Rt=1,ce={action:Li(),clear:Vi(),style:Gi(),strip:re(),figures:Mt(),lines:Ui(),wrap:Bi(),entriesToDisplay:Ji()}),ce}var de,qt;function H(){if(qt)return de;qt=1;const e=gt,s=k(),a=s.action,t=vt,h=R(),v=h.beep,r=h.cursor,m=_();class n extends t{constructor(i={}){super(),this.firstRender=!0,this.in=i.stdin||process.stdin,this.out=i.stdout||process.stdout,this.onRender=(i.onRender||(()=>{})).bind(this);const c=e.createInterface({input:this.in,escapeCodeTimeout:50});e.emitKeypressEvents(this.in,c),this.in.isTTY&&this.in.setRawMode(!0);const p=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,o=(u,b)=>{let g=a(b,p);g===!1?this._&&this._(u,b):typeof this[g]=="function"?this[g](b):this.bell()};this.close=()=>{this.out.write(r.show),this.in.removeListener("keypress",o),this.in.isTTY&&this.in.setRawMode(!1),c.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",o)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(v)}render(){this.onRender(m),this.firstRender&&(this.firstRender=!1)}}return de=n,de}var fe,Dt;function zi(){if(Dt)return fe;Dt=1;function e(o,u,b,g,f,d,w){try{var x=o[d](w),y=x.value}catch($){b($);return}x.done?u(y):Promise.resolve(y).then(g,f)}function s(o){return function(){var u=this,b=arguments;return new Promise(function(g,f){var d=o.apply(u,b);function w(y){e(d,g,f,w,x,"next",y)}function x(y){e(d,g,f,w,x,"throw",y)}w(void 0)})}}const a=_(),t=H(),h=R(),v=h.erase,r=h.cursor,m=k(),n=m.style,l=m.clear,i=m.lines,c=m.figures;class p extends t{constructor(u={}){super(u),this.transform=n.render(u.style),this.scale=this.transform.scale,this.msg=u.message,this.initial=u.initial||"",this.validator=u.validate||(()=>!0),this.value="",this.errorMsg=u.error||"Please Enter A Valid Value",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.clear=l("",this.out.columns),this.render()}set value(u){!u&&this.initial?(this.placeholder=!0,this.rendered=a.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(u)),this._value=u,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}validate(){var u=this;return s(function*(){let b=yield u.validator(u.value);typeof b=="string"&&(u.errorMsg=b,b=!1),u.error=!b})()}submit(){var u=this;return s(function*(){if(u.value=u.value||u.initial,u.cursorOffset=0,u.cursor=u.rendered.length,yield u.validate(),u.error){u.red=!0,u.fire(),u.render();return}u.done=!0,u.aborted=!1,u.fire(),u.render(),u.out.write(`
`),u.close()})()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(u){this.placeholder||(this.cursor=this.cursor+u,this.cursorOffset+=u)}_(u,b){let g=this.value.slice(0,this.cursor),f=this.value.slice(this.cursor);this.value=`${g}${u}${f}`,this.red=!1,this.cursor=this.placeholder?0:g.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let u=this.value.slice(0,this.cursor-1),b=this.value.slice(this.cursor);this.value=`${u}${b}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let u=this.value.slice(0,this.cursor),b=this.value.slice(this.cursor+1);this.value=`${u}${b}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return this.cursor===0||this.placeholder&&this.cursor===1}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(r.down(i(this.outputError,this.out.columns)-1)+l(this.outputError,this.out.columns)),this.out.write(l(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[n.symbol(this.done,this.aborted),a.bold(this.msg),n.delimiter(this.done),this.red?a.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((u,b,g)=>u+`
${g?" ":c.pointerSmall} ${a.red().italic(b)}`,"")),this.out.write(v.line+r.to(0)+this.outputText+r.save+this.outputError+r.restore+r.move(this.cursorOffset,0)))}}return fe=p,fe}var pe,It;function Ki(){if(It)return pe;It=1;const e=_(),s=H(),a=k(),t=a.style,h=a.clear,v=a.figures,r=a.wrap,m=a.entriesToDisplay,n=R(),l=n.cursor;class i extends s{constructor(p={}){super(p),this.msg=p.message,this.hint=p.hint||"- Use arrow-keys. Return to submit.",this.warn=p.warn||"- This option is disabled",this.cursor=p.initial||0,this.choices=p.choices.map((o,u)=>(typeof o=="string"&&(o={title:o,value:u}),{title:o&&(o.title||o.value||o),value:o&&(o.value===void 0?u:o.value),description:o&&o.description,selected:o&&o.selected,disabled:o&&o.disabled})),this.optionsPerPage=p.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=h("",this.out.columns),this.render()}moveCursor(p){this.cursor=p,this.value=this.choices[p].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){this.cursor===0?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(p,o){if(p===" ")return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(l.hide):this.out.write(h(this.outputText,this.out.columns)),super.render();let p=m(this.cursor,this.choices.length,this.optionsPerPage),o=p.startIndex,u=p.endIndex;if(this.outputText=[t.symbol(this.done,this.aborted),e.bold(this.msg),t.delimiter(!1),this.done?this.selection.title:this.selection.disabled?e.yellow(this.warn):e.gray(this.hint)].join(" "),!this.done){this.outputText+=`
`;for(let b=o;b<u;b++){let g,f,d="",w=this.choices[b];b===o&&o>0?f=v.arrowUp:b===u-1&&u<this.choices.length?f=v.arrowDown:f=" ",w.disabled?(g=this.cursor===b?e.gray().underline(w.title):e.strikethrough().gray(w.title),f=(this.cursor===b?e.bold().gray(v.pointer)+" ":"  ")+f):(g=this.cursor===b?e.cyan().underline(w.title):w.title,f=(this.cursor===b?e.cyan(v.pointer)+" ":"  ")+f,w.description&&this.cursor===b&&(d=` - ${w.description}`,(f.length+g.length+d.length>=this.out.columns||w.description.split(/\r?\n/).length>1)&&(d=`
`+r(w.description,{margin:3,width:this.out.columns})))),this.outputText+=`${f} ${g}${e.gray(d)}
`}}this.out.write(this.outputText)}}return pe=i,pe}var me,Ct;function Wi(){if(Ct)return me;Ct=1;const e=_(),s=H(),a=k(),t=a.style,h=a.clear,v=R(),r=v.cursor,m=v.erase;class n extends s{constructor(i={}){super(i),this.msg=i.message,this.value=!!i.initial,this.active=i.active||"on",this.inactive=i.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}deactivate(){if(this.value===!1)return this.bell();this.value=!1,this.render()}activate(){if(this.value===!0)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(i,c){if(i===" ")this.value=!this.value;else if(i==="1")this.value=!0;else if(i==="0")this.value=!1;else return this.bell();this.render()}render(){this.closed||(this.firstRender?this.out.write(r.hide):this.out.write(h(this.outputText,this.out.columns)),super.render(),this.outputText=[t.symbol(this.done,this.aborted),e.bold(this.msg),t.delimiter(this.done),this.value?this.inactive:e.cyan().underline(this.inactive),e.gray("/"),this.value?e.cyan().underline(this.active):this.active].join(" "),this.out.write(m.line+r.to(0)+this.outputText))}}return me=n,me}var ge,At;function N(){if(At)return ge;At=1;class e{constructor({token:a,date:t,parts:h,locales:v}){this.token=a,this.date=t||new Date,this.parts=h||[this],this.locales=v||{}}up(){}down(){}next(){const a=this.parts.indexOf(this);return this.parts.find((t,h)=>h>a&&t instanceof e)}setTo(a){}prev(){let a=[].concat(this.parts).reverse();const t=a.indexOf(this);return a.find((h,v)=>v>t&&h instanceof e)}toString(){return String(this.date)}}return ge=e,ge}var ve,Et;function Zi(){if(Et)return ve;Et=1;const e=N();class s extends e{constructor(t={}){super(t)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let t=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?t.toUpperCase():t}}return ve=s,ve}var be,jt;function Qi(){if(jt)return be;jt=1;const e=N(),s=t=>(t=t%10,t===1?"st":t===2?"nd":t===3?"rd":"th");class a extends e{constructor(h={}){super(h)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(h){this.date.setDate(parseInt(h.substr(-2)))}toString(){let h=this.date.getDate(),v=this.date.getDay();return this.token==="DD"?String(h).padStart(2,"0"):this.token==="Do"?h+s(h):this.token==="d"?v+1:this.token==="ddd"?this.locales.weekdaysShort[v]:this.token==="dddd"?this.locales.weekdays[v]:h}}return be=a,be}var we,kt;function Xi(){if(kt)return we;kt=1;const e=N();class s extends e{constructor(t={}){super(t)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(t){this.date.setHours(parseInt(t.substr(-2)))}toString(){let t=this.date.getHours();return/h/.test(this.token)&&(t=t%12||12),this.token.length>1?String(t).padStart(2,"0"):t}}return we=s,we}var ye,Ft;function er(){if(Ft)return ye;Ft=1;const e=N();class s extends e{constructor(t={}){super(t)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(t){this.date.setMilliseconds(parseInt(t.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}}return ye=s,ye}var xe,Nt;function tr(){if(Nt)return xe;Nt=1;const e=N();class s extends e{constructor(t={}){super(t)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(t){this.date.setMinutes(parseInt(t.substr(-2)))}toString(){let t=this.date.getMinutes();return this.token.length>1?String(t).padStart(2,"0"):t}}return xe=s,xe}var $e,Yt;function ir(){if(Yt)return $e;Yt=1;const e=N();class s extends e{constructor(t={}){super(t)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(t){t=parseInt(t.substr(-2))-1,this.date.setMonth(t<0?0:t)}toString(){let t=this.date.getMonth(),h=this.token.length;return h===2?String(t+1).padStart(2,"0"):h===3?this.locales.monthsShort[t]:h===4?this.locales.months[t]:String(t+1)}}return $e=s,$e}var Se,Ht;function rr(){if(Ht)return Se;Ht=1;const e=N();class s extends e{constructor(t={}){super(t)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(t){this.date.setSeconds(parseInt(t.substr(-2)))}toString(){let t=this.date.getSeconds();return this.token.length>1?String(t).padStart(2,"0"):t}}return Se=s,Se}var Me,Lt;function sr(){if(Lt)return Me;Lt=1;const e=N();class s extends e{constructor(t={}){super(t)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(t){this.date.setFullYear(t.substr(-4))}toString(){let t=String(this.date.getFullYear()).padStart(4,"0");return this.token.length===2?t.substr(-2):t}}return Me=s,Me}var Oe,Vt;function nr(){return Vt||(Vt=1,Oe={DatePart:N(),Meridiem:Zi(),Day:Qi(),Hours:Xi(),Milliseconds:er(),Minutes:tr(),Month:ir(),Seconds:rr(),Year:sr()}),Oe}var Pe,Gt;function or(){if(Gt)return Pe;Gt=1;function e(S,M,T,C,q,D,j){try{var A=S[D](j),I=A.value}catch(B){T(B);return}A.done?M(I):Promise.resolve(I).then(C,q)}function s(S){return function(){var M=this,T=arguments;return new Promise(function(C,q){var D=S.apply(M,T);function j(I){e(D,C,q,j,A,"next",I)}function A(I){e(D,C,q,j,A,"throw",I)}j(void 0)})}}const a=_(),t=H(),h=k(),v=h.style,r=h.clear,m=h.figures,n=R(),l=n.erase,i=n.cursor,c=nr(),p=c.DatePart,o=c.Meridiem,u=c.Day,b=c.Hours,g=c.Milliseconds,f=c.Minutes,d=c.Month,w=c.Seconds,x=c.Year,y=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,$={1:({token:S})=>S.replace(/\\(.)/g,"$1"),2:S=>new u(S),3:S=>new d(S),4:S=>new x(S),5:S=>new o(S),6:S=>new b(S),7:S=>new f(S),8:S=>new w(S),9:S=>new g(S)},P={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};class O extends t{constructor(M={}){super(M),this.msg=M.message,this.cursor=0,this.typed="",this.locales=Object.assign(P,M.locales),this._date=M.initial||new Date,this.errorMsg=M.error||"Please Enter A Valid Value",this.validator=M.validate||(()=>!0),this.mask=M.mask||"YYYY-MM-DD HH:mm:ss",this.clear=r("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(M){M&&this._date.setTime(M.getTime())}set mask(M){let T;for(this.parts=[];T=y.exec(M);){let q=T.shift(),D=T.findIndex(j=>j!=null);this.parts.push(D in $?$[D]({token:T[D]||q,date:this.date,parts:this.parts,locales:this.locales}):T[D]||q)}let C=this.parts.reduce((q,D)=>(typeof D=="string"&&typeof q[q.length-1]=="string"?q[q.length-1]+=D:q.push(D),q),[]);this.parts.splice(0),this.parts.push(...C),this.reset()}moveCursor(M){this.typed="",this.cursor=M,this.fire()}reset(){this.moveCursor(this.parts.findIndex(M=>M instanceof p)),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}validate(){var M=this;return s(function*(){let T=yield M.validator(M.value);typeof T=="string"&&(M.errorMsg=T,T=!1),M.error=!T})()}submit(){var M=this;return s(function*(){if(yield M.validate(),M.error){M.color="red",M.fire(),M.render();return}M.done=!0,M.aborted=!1,M.fire(),M.render(),M.out.write(`
`),M.close()})()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let M=this.parts[this.cursor].prev();if(M==null)return this.bell();this.moveCursor(this.parts.indexOf(M)),this.render()}right(){let M=this.parts[this.cursor].next();if(M==null)return this.bell();this.moveCursor(this.parts.indexOf(M)),this.render()}next(){let M=this.parts[this.cursor].next();this.moveCursor(M?this.parts.indexOf(M):this.parts.findIndex(T=>T instanceof p)),this.render()}_(M){/\d/.test(M)&&(this.typed+=M,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(i.hide):this.out.write(r(this.outputText,this.out.columns)),super.render(),this.outputText=[v.symbol(this.done,this.aborted),a.bold(this.msg),v.delimiter(!1),this.parts.reduce((M,T,C)=>M.concat(C===this.cursor&&!this.done?a.cyan().underline(T.toString()):T),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split(`
`).reduce((M,T,C)=>M+`
${C?" ":m.pointerSmall} ${a.red().italic(T)}`,"")),this.out.write(l.line+i.to(0)+this.outputText))}}return Pe=O,Pe}var Te,Ut;function hr(){if(Ut)return Te;Ut=1;function e(g,f,d,w,x,y,$){try{var P=g[y]($),O=P.value}catch(S){d(S);return}P.done?f(O):Promise.resolve(O).then(w,x)}function s(g){return function(){var f=this,d=arguments;return new Promise(function(w,x){var y=g.apply(f,d);function $(O){e(y,w,x,$,P,"next",O)}function P(O){e(y,w,x,$,P,"throw",O)}$(void 0)})}}const a=_(),t=H(),h=R(),v=h.cursor,r=h.erase,m=k(),n=m.style,l=m.figures,i=m.clear,c=m.lines,p=/[0-9]/,o=g=>g!==void 0,u=(g,f)=>{let d=Math.pow(10,f);return Math.round(g*d)/d};class b extends t{constructor(f={}){super(f),this.transform=n.render(f.style),this.msg=f.message,this.initial=o(f.initial)?f.initial:"",this.float=!!f.float,this.round=f.round||2,this.inc=f.increment||1,this.min=o(f.min)?f.min:-1/0,this.max=o(f.max)?f.max:1/0,this.errorMsg=f.error||"Please Enter A Valid Value",this.validator=f.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(f){!f&&f!==0?(this.placeholder=!0,this.rendered=a.gray(this.transform.render(`${this.initial}`)),this._value=""):(this.placeholder=!1,this.rendered=this.transform.render(`${u(f,this.round)}`),this._value=u(f,this.round)),this.fire()}get value(){return this._value}parse(f){return this.float?parseFloat(f):parseInt(f)}valid(f){return f==="-"||f==="."&&this.float||p.test(f)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let f=this.value;this.value=f!==""?f:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}validate(){var f=this;return s(function*(){let d=yield f.validator(f.value);typeof d=="string"&&(f.errorMsg=d,d=!1),f.error=!d})()}submit(){var f=this;return s(function*(){if(yield f.validate(),f.error){f.color="red",f.fire(),f.render();return}let d=f.value;f.value=d!==""?d:f.initial,f.done=!0,f.aborted=!1,f.error=!1,f.fire(),f.render(),f.out.write(`
`),f.close()})()}up(){if(this.typed="",this.value===""&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",this.value===""&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let f=this.value.toString();if(f.length===0)return this.bell();this.value=this.parse(f=f.slice(0,-1))||"",this.value!==""&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(f,d){if(!this.valid(f))return this.bell();const w=Date.now();if(w-this.lastHit>1e3&&(this.typed=""),this.typed+=f,this.lastHit=w,this.color="cyan",f===".")return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(v.down(c(this.outputError,this.out.columns)-1)+i(this.outputError,this.out.columns)),this.out.write(i(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[n.symbol(this.done,this.aborted),a.bold(this.msg),n.delimiter(this.done),!this.done||!this.done&&!this.placeholder?a[this.color]().underline(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((f,d,w)=>f+`
${w?" ":l.pointerSmall} ${a.red().italic(d)}`,"")),this.out.write(r.line+v.to(0)+this.outputText+v.save+this.outputError+v.restore))}}return Te=b,Te}var _e,Bt;function Jt(){if(Bt)return _e;Bt=1;const e=_(),s=R(),a=s.cursor,t=H(),h=k(),v=h.clear,r=h.figures,m=h.style,n=h.wrap,l=h.entriesToDisplay;class i extends t{constructor(p={}){super(p),this.msg=p.message,this.cursor=p.cursor||0,this.scrollIndex=p.cursor||0,this.hint=p.hint||"",this.warn=p.warn||"- This option is disabled -",this.minSelected=p.min,this.showMinError=!1,this.maxChoices=p.max,this.instructions=p.instructions,this.optionsPerPage=p.optionsPerPage||10,this.value=p.choices.map((o,u)=>(typeof o=="string"&&(o={title:o,value:u}),{title:o&&(o.title||o.value||o),description:o&&o.description,value:o&&(o.value===void 0?u:o.value),selected:o&&o.selected,disabled:o&&o.disabled})),this.clear=v("",this.out.columns),p.overrideRender||this.render()}reset(){this.value.map(p=>!p.selected),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter(p=>p.selected)}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){const p=this.value.filter(o=>o.selected);this.minSelected&&p.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){this.cursor===0?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(p=>p.selected).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const p=this.value[this.cursor];if(p.selected)p.selected=!1,this.render();else{if(p.disabled||this.value.filter(o=>o.selected).length>=this.maxChoices)return this.bell();p.selected=!0,this.render()}}toggleAll(){if(this.maxChoices!==void 0||this.value[this.cursor].disabled)return this.bell();const p=!this.value[this.cursor].selected;this.value.filter(o=>!o.disabled).forEach(o=>o.selected=p),this.render()}_(p,o){if(p===" ")this.handleSpaceToggle();else if(p==="a")this.toggleAll();else return this.bell()}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${r.arrowUp}/${r.arrowDown}: Highlight option
    ${r.arrowLeft}/${r.arrowRight}/[space]: Toggle selection
`+(this.maxChoices===void 0?`    a: Toggle all
`:"")+"    enter/return: Complete answer":""}renderOption(p,o,u,b){const g=(o.selected?e.green(r.radioOn):r.radioOff)+" "+b+" ";let f,d;return o.disabled?f=p===u?e.gray().underline(o.title):e.strikethrough().gray(o.title):(f=p===u?e.cyan().underline(o.title):o.title,p===u&&o.description&&(d=` - ${o.description}`,(g.length+f.length+d.length>=this.out.columns||o.description.split(/\r?\n/).length>1)&&(d=`
`+n(o.description,{margin:g.length,width:this.out.columns})))),g+f+e.gray(d||"")}paginateOptions(p){if(p.length===0)return e.red("No matches for this query.");let o=l(this.cursor,p.length,this.optionsPerPage),u=o.startIndex,b=o.endIndex,g,f=[];for(let d=u;d<b;d++)d===u&&u>0?g=r.arrowUp:d===b-1&&b<p.length?g=r.arrowDown:g=" ",f.push(this.renderOption(this.cursor,p[d],d,g));return`
`+f.join(`
`)}renderOptions(p){return this.done?"":this.paginateOptions(p)}renderDoneOrInstructions(){if(this.done)return this.value.filter(o=>o.selected).map(o=>o.title).join(", ");const p=[e.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&p.push(e.yellow(this.warn)),p.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(a.hide),super.render();let p=[m.symbol(this.done,this.aborted),e.bold(this.msg),m.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(p+=e.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),p+=this.renderOptions(this.value),this.out.write(this.clear+p),this.clear=v(p,this.out.columns)}}return _e=i,_e}var Re,zt;function lr(){if(zt)return Re;zt=1;function e(f,d,w,x,y,$,P){try{var O=f[$](P),S=O.value}catch(M){w(M);return}O.done?d(S):Promise.resolve(S).then(x,y)}function s(f){return function(){var d=this,w=arguments;return new Promise(function(x,y){var $=f.apply(d,w);function P(S){e($,x,y,P,O,"next",S)}function O(S){e($,x,y,P,O,"throw",S)}P(void 0)})}}const a=_(),t=H(),h=R(),v=h.erase,r=h.cursor,m=k(),n=m.style,l=m.clear,i=m.figures,c=m.wrap,p=m.entriesToDisplay,o=(f,d)=>f[d]&&(f[d].value||f[d].title||f[d]),u=(f,d)=>f[d]&&(f[d].title||f[d].value||f[d]),b=(f,d)=>{const w=f.findIndex(x=>x.value===d||x.title===d);return w>-1?w:void 0};class g extends t{constructor(d={}){super(d),this.msg=d.message,this.suggest=d.suggest,this.choices=d.choices,this.initial=typeof d.initial=="number"?d.initial:b(d.choices,d.initial),this.select=this.initial||d.cursor||0,this.i18n={noMatches:d.noMatches||"no matches found"},this.fallback=d.fallback||this.initial,this.clearFirst=d.clearFirst||!1,this.suggestions=[],this.input="",this.limit=d.limit||10,this.cursor=0,this.transform=n.render(d.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=l("",this.out.columns),this.complete(this.render),this.render()}set fallback(d){this._fb=Number.isSafeInteger(parseInt(d))?parseInt(d):d}get fallback(){let d;return typeof this._fb=="number"?d=this.choices[this._fb]:typeof this._fb=="string"&&(d={title:this._fb}),d||this._fb||{title:this.i18n.noMatches}}moveSelect(d){this.select=d,this.suggestions.length>0?this.value=o(this.suggestions,d):this.value=this.fallback.value,this.fire()}complete(d){var w=this;return s(function*(){const x=w.completing=w.suggest(w.input,w.choices),y=yield x;if(w.completing!==x)return;w.suggestions=y.map((P,O,S)=>({title:u(S,O),value:o(S,O),description:P.description})),w.completing=!1;const $=Math.max(y.length-1,0);w.moveSelect(Math.min($,w.select)),d&&d()})()}reset(){this.input="",this.complete(()=>{this.moveSelect(this.initial!==void 0?this.initial:0),this.render()}),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(d,w){let x=this.input.slice(0,this.cursor),y=this.input.slice(this.cursor);this.input=`${x}${d}${y}`,this.cursor=x.length+1,this.complete(this.render),this.render()}delete(){if(this.cursor===0)return this.bell();let d=this.input.slice(0,this.cursor-1),w=this.input.slice(this.cursor);this.input=`${d}${w}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let d=this.input.slice(0,this.cursor),w=this.input.slice(this.cursor+1);this.input=`${d}${w}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){this.select===0?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(d,w,x,y){let $,P=x?i.arrowUp:y?i.arrowDown:" ",O=w?a.cyan().underline(d.title):d.title;return P=(w?a.cyan(i.pointer)+" ":"  ")+P,d.description&&($=` - ${d.description}`,(P.length+O.length+$.length>=this.out.columns||d.description.split(/\r?\n/).length>1)&&($=`
`+c(d.description,{margin:3,width:this.out.columns}))),P+" "+O+a.gray($||"")}render(){if(this.closed)return;this.firstRender?this.out.write(r.hide):this.out.write(l(this.outputText,this.out.columns)),super.render();let d=p(this.select,this.choices.length,this.limit),w=d.startIndex,x=d.endIndex;if(this.outputText=[n.symbol(this.done,this.aborted,this.exited),a.bold(this.msg),n.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const y=this.suggestions.slice(w,x).map(($,P)=>this.renderOption($,this.select===P+w,P===0&&w>0,P+w===x-1&&x<this.choices.length)).join(`
`);this.outputText+=`
`+(y||a.gray(this.fallback.title))}this.out.write(v.line+r.to(0)+this.outputText)}}return Re=g,Re}var qe,Kt;function ur(){if(Kt)return qe;Kt=1;const e=_(),s=R(),a=s.cursor,t=Jt(),h=k(),v=h.clear,r=h.style,m=h.figures;class n extends t{constructor(i={}){i.overrideRender=!0,super(i),this.inputValue="",this.clear=v("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){this.cursor===0?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(i=>i.selected).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const i=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter(p=>this.inputValue?!!(typeof p.title=="string"&&p.title.toLowerCase().includes(this.inputValue.toLowerCase())||typeof p.value=="string"&&p.value.toLowerCase().includes(this.inputValue.toLowerCase())):!0);const c=this.filteredOptions.findIndex(p=>p===i);this.cursor=c<0?0:c,this.render()}handleSpaceToggle(){const i=this.filteredOptions[this.cursor];if(i.selected)i.selected=!1,this.render();else{if(i.disabled||this.value.filter(c=>c.selected).length>=this.maxChoices)return this.bell();i.selected=!0,this.render()}}handleInputChange(i){this.inputValue=this.inputValue+i,this.updateFilteredOptions()}_(i,c){i===" "?this.handleSpaceToggle():this.handleInputChange(i)}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${m.arrowUp}/${m.arrowDown}: Highlight option
    ${m.arrowLeft}/${m.arrowRight}/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer
`:""}renderCurrentInput(){return`
Filtered results for: ${this.inputValue?this.inputValue:e.gray("Enter something to filter")}
`}renderOption(i,c,p){let o;return c.disabled?o=i===p?e.gray().underline(c.title):e.strikethrough().gray(c.title):o=i===p?e.cyan().underline(c.title):c.title,(c.selected?e.green(m.radioOn):m.radioOff)+"  "+o}renderDoneOrInstructions(){if(this.done)return this.value.filter(c=>c.selected).map(c=>c.title).join(", ");const i=[e.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&i.push(e.yellow(this.warn)),i.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(a.hide),super.render();let i=[r.symbol(this.done,this.aborted),e.bold(this.msg),r.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(i+=e.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),i+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+i),this.clear=v(i,this.out.columns)}}return qe=n,qe}var De,Wt;function ar(){if(Wt)return De;Wt=1;const e=_(),s=H(),a=k(),t=a.style,h=a.clear,v=R(),r=v.erase,m=v.cursor;class n extends s{constructor(i={}){super(i),this.msg=i.message,this.value=i.initial,this.initialValue=!!i.initial,this.yesMsg=i.yes||"yes",this.yesOption=i.yesOption||"(Y/n)",this.noMsg=i.no||"no",this.noOption=i.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(i,c){return i.toLowerCase()==="y"?(this.value=!0,this.submit()):i.toLowerCase()==="n"?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(m.hide):this.out.write(h(this.outputText,this.out.columns)),super.render(),this.outputText=[t.symbol(this.done,this.aborted),e.bold(this.msg),t.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:e.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(r.line+m.to(0)+this.outputText))}}return De=n,De}var Ie,Zt;function cr(){return Zt||(Zt=1,Ie={TextPrompt:zi(),SelectPrompt:Ki(),TogglePrompt:Wi(),DatePrompt:or(),NumberPrompt:hr(),MultiselectPrompt:Jt(),AutocompletePrompt:lr(),AutocompleteMultiselectPrompt:ur(),ConfirmPrompt:ar()}),Ie}var Qt;function dr(){return Qt||(Qt=1,function(e){const s=e,a=cr(),t=r=>r;function h(r,m,n={}){return new Promise((l,i)=>{const c=new a[r](m),p=n.onAbort||t,o=n.onSubmit||t,u=n.onExit||t;c.on("state",m.onState||t),c.on("submit",b=>l(o(b))),c.on("exit",b=>l(u(b))),c.on("abort",b=>i(p(b)))})}s.text=r=>h("TextPrompt",r),s.password=r=>(r.style="password",s.text(r)),s.invisible=r=>(r.style="invisible",s.text(r)),s.number=r=>h("NumberPrompt",r),s.date=r=>h("DatePrompt",r),s.confirm=r=>h("ConfirmPrompt",r),s.list=r=>{const m=r.separator||",";return h("TextPrompt",r,{onSubmit:n=>n.split(m).map(l=>l.trim())})},s.toggle=r=>h("TogglePrompt",r),s.select=r=>h("SelectPrompt",r),s.multiselect=r=>{r.choices=[].concat(r.choices||[]);const m=n=>n.filter(l=>l.selected).map(l=>l.value);return h("MultiselectPrompt",r,{onAbort:m,onSubmit:m})},s.autocompleteMultiselect=r=>{r.choices=[].concat(r.choices||[]);const m=n=>n.filter(l=>l.selected).map(l=>l.value);return h("AutocompleteMultiselectPrompt",r,{onAbort:m,onSubmit:m})};const v=(r,m)=>Promise.resolve(m.filter(n=>n.title.slice(0,r.length).toLowerCase()===r.toLowerCase()));s.autocomplete=r=>(r.suggest=r.suggest||v,r.choices=[].concat(r.choices||[]),h("AutocompletePrompt",r))}(X)),X}var Ce,Xt;function fr(){if(Xt)return Ce;Xt=1;function e(g,f){var d=Object.keys(g);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(g);f&&(w=w.filter(function(x){return Object.getOwnPropertyDescriptor(g,x).enumerable})),d.push.apply(d,w)}return d}function s(g){for(var f=1;f<arguments.length;f++){var d=arguments[f]!=null?arguments[f]:{};f%2?e(Object(d),!0).forEach(function(w){a(g,w,d[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(d)):e(Object(d)).forEach(function(w){Object.defineProperty(g,w,Object.getOwnPropertyDescriptor(d,w))})}return g}function a(g,f,d){return f in g?Object.defineProperty(g,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):g[f]=d,g}function t(g,f){var d=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!d){if(Array.isArray(g)||(d=h(g))||f&&g&&typeof g.length=="number"){d&&(g=d);var w=0,x=function(){};return{s:x,n:function(){return w>=g.length?{done:!0}:{done:!1,value:g[w++]}},e:function(S){throw S},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y=!0,$=!1,P;return{s:function(){d=d.call(g)},n:function(){var S=d.next();return y=S.done,S},e:function(S){$=!0,P=S},f:function(){try{!y&&d.return!=null&&d.return()}finally{if($)throw P}}}}function h(g,f){if(!!g){if(typeof g=="string")return v(g,f);var d=Object.prototype.toString.call(g).slice(8,-1);if(d==="Object"&&g.constructor&&(d=g.constructor.name),d==="Map"||d==="Set")return Array.from(g);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return v(g,f)}}function v(g,f){(f==null||f>g.length)&&(f=g.length);for(var d=0,w=new Array(f);d<f;d++)w[d]=g[d];return w}function r(g,f,d,w,x,y,$){try{var P=g[y]($),O=P.value}catch(S){d(S);return}P.done?f(O):Promise.resolve(O).then(w,x)}function m(g){return function(){var f=this,d=arguments;return new Promise(function(w,x){var y=g.apply(f,d);function $(O){r(y,w,x,$,P,"next",O)}function P(O){r(y,w,x,$,P,"throw",O)}$(void 0)})}}const n=dr(),l=["suggest","format","onState","validate","onRender","type"],i=()=>{};function c(){return p.apply(this,arguments)}function p(){return p=m(function*(g=[],{onSubmit:f=i,onCancel:d=i}={}){const w={},x=c._override||{};g=[].concat(g);let y,$,P,O,S,M;const T=function(){var A=m(function*(I,B,mt=!1){if(!(!mt&&I.validate&&I.validate(B)!==!0))return I.format?yield I.format(B,w):B});return function(B,mt){return A.apply(this,arguments)}}();var C=t(g),q;try{for(C.s();!(q=C.n()).done;){$=q.value;var D=$;if(O=D.name,S=D.type,typeof S=="function"&&(S=yield S(y,s({},w),$),$.type=S),!!S){for(let A in $){if(l.includes(A))continue;let I=$[A];$[A]=typeof I=="function"?yield I(y,s({},w),M):I}if(M=$,typeof $.message!="string")throw new Error("prompt message is required");var j=$;if(O=j.name,S=j.type,n[S]===void 0)throw new Error(`prompt type (${S}) is not defined`);if(x[$.name]!==void 0&&(y=yield T($,x[$.name]),y!==void 0)){w[O]=y;continue}try{y=c._injected?o(c._injected,$.initial):yield n[S]($),w[O]=y=yield T($,y,!0),P=yield f($,y,w)}catch{P=!(yield d($,w))}if(P)return w}}}catch(A){C.e(A)}finally{C.f()}return w}),p.apply(this,arguments)}function o(g,f){const d=g.shift();if(d instanceof Error)throw d;return d===void 0?f:d}function u(g){c._injected=(c._injected||[]).concat(g)}function b(g){c._override=Object.assign({},g)}return Ce=Object.assign(c,{prompt:c,prompts:n,inject:u,override:b}),Ce}var Ae={},Ee,ei;function pr(){return ei||(ei=1,Ee=(e,s)=>{if(!(e.meta&&e.name!=="escape")){if(e.ctrl){if(e.name==="a")return"first";if(e.name==="c"||e.name==="d")return"abort";if(e.name==="e")return"last";if(e.name==="g")return"reset"}if(s){if(e.name==="j")return"down";if(e.name==="k")return"up"}return e.name==="return"||e.name==="enter"?"submit":e.name==="backspace"?"delete":e.name==="delete"?"deleteForward":e.name==="abort"?"abort":e.name==="escape"?"exit":e.name==="tab"?"next":e.name==="pagedown"?"nextPage":e.name==="pageup"?"prevPage":e.name==="home"?"home":e.name==="end"?"end":e.name==="up"?"up":e.name==="down"?"down":e.name==="right"?"right":e.name==="left"?"left":!1}}),Ee}var je,ti;function ke(){return ti||(ti=1,je=e=>{const s=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),a=new RegExp(s,"g");return typeof e=="string"?e.replace(a,""):e}),je}var Fe,ii;function mr(){if(ii)return Fe;ii=1;const e=ke(),{erase:s,cursor:a}=R(),t=h=>[...e(h)].length;return Fe=function(h,v){if(!v)return s.line+a.to(0);let r=0;const m=h.split(/\r?\n/);for(let n of m)r+=1+Math.floor(Math.max(t(n)-1,0)/v);return s.lines(r)},Fe}var Ne,ri;function si(){if(ri)return Ne;ri=1;const e={arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",tick:"\u2714",cross:"\u2716",ellipsis:"\u2026",pointerSmall:"\u203A",line:"\u2500",pointer:"\u276F"},s={arrowUp:e.arrowUp,arrowDown:e.arrowDown,arrowLeft:e.arrowLeft,arrowRight:e.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"\u221A",cross:"\xD7",ellipsis:"...",pointerSmall:"\xBB",line:"\u2500",pointer:">"};return Ne=process.platform==="win32"?s:e,Ne}var Ye,ni;function gr(){if(ni)return Ye;ni=1;const e=_(),s=si(),a=Object.freeze({password:{scale:1,render:n=>"*".repeat(n.length)},emoji:{scale:2,render:n=>"\u{1F603}".repeat(n.length)},invisible:{scale:0,render:n=>""},default:{scale:1,render:n=>`${n}`}}),t=n=>a[n]||a.default,h=Object.freeze({aborted:e.red(s.cross),done:e.green(s.tick),exited:e.yellow(s.cross),default:e.cyan("?")});return Ye={styles:a,render:t,symbols:h,symbol:(n,l,i)=>l?h.aborted:i?h.exited:n?h.done:h.default,delimiter:n=>e.gray(n?s.ellipsis:s.pointerSmall),item:(n,l)=>e.gray(n?l?s.pointerSmall:"+":s.line)},Ye}var He,oi;function vr(){if(oi)return He;oi=1;const e=ke();return He=function(s,a){let t=String(e(s)||"").split(/\r?\n/);return a?t.map(h=>Math.ceil(h.length/a)).reduce((h,v)=>h+v):t.length},He}var Le,hi;function br(){return hi||(hi=1,Le=(e,s={})=>{const a=Number.isSafeInteger(parseInt(s.margin))?new Array(parseInt(s.margin)).fill(" ").join(""):s.margin||"",t=s.width;return(e||"").split(/\r?\n/g).map(h=>h.split(/\s+/g).reduce((v,r)=>(r.length+a.length>=t||v[v.length-1].length+r.length+1<t?v[v.length-1]+=` ${r}`:v.push(`${a}${r}`),v),[a]).join(`
`)).join(`
`)}),Le}var Ve,li;function wr(){return li||(li=1,Ve=(e,s,a)=>{a=a||s;let t=Math.min(s-a,e-Math.floor(a/2));t<0&&(t=0);let h=Math.min(t+a,s);return{startIndex:t,endIndex:h}}),Ve}var Ge,ui;function F(){return ui||(ui=1,Ge={action:pr(),clear:mr(),style:gr(),strip:ke(),figures:si(),lines:vr(),wrap:br(),entriesToDisplay:wr()}),Ge}var Ue,ai;function L(){if(ai)return Ue;ai=1;const e=gt,{action:s}=F(),a=vt,{beep:t,cursor:h}=R(),v=_();class r extends a{constructor(n={}){super(),this.firstRender=!0,this.in=n.stdin||process.stdin,this.out=n.stdout||process.stdout,this.onRender=(n.onRender||(()=>{})).bind(this);const l=e.createInterface({input:this.in,escapeCodeTimeout:50});e.emitKeypressEvents(this.in,l),this.in.isTTY&&this.in.setRawMode(!0);const i=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,c=(p,o)=>{let u=s(o,i);u===!1?this._&&this._(p,o):typeof this[u]=="function"?this[u](o):this.bell()};this.close=()=>{this.out.write(h.show),this.in.removeListener("keypress",c),this.in.isTTY&&this.in.setRawMode(!1),l.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",c)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(t)}render(){this.onRender(v),this.firstRender&&(this.firstRender=!1)}}return Ue=r,Ue}var Be,ci;function yr(){if(ci)return Be;ci=1;const e=_(),s=L(),{erase:a,cursor:t}=R(),{style:h,clear:v,lines:r,figures:m}=F();class n extends s{constructor(i={}){super(i),this.transform=h.render(i.style),this.scale=this.transform.scale,this.msg=i.message,this.initial=i.initial||"",this.validator=i.validate||(()=>!0),this.value="",this.errorMsg=i.error||"Please Enter A Valid Value",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.clear=v("",this.out.columns),this.render()}set value(i){!i&&this.initial?(this.placeholder=!0,this.rendered=e.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(i)),this._value=i,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let i=await this.validator(this.value);typeof i=="string"&&(this.errorMsg=i,i=!1),this.error=!i}async submit(){if(this.value=this.value||this.initial,this.cursorOffset=0,this.cursor=this.rendered.length,await this.validate(),this.error){this.red=!0,this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(i){this.placeholder||(this.cursor=this.cursor+i,this.cursorOffset+=i)}_(i,c){let p=this.value.slice(0,this.cursor),o=this.value.slice(this.cursor);this.value=`${p}${i}${o}`,this.red=!1,this.cursor=this.placeholder?0:p.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let i=this.value.slice(0,this.cursor-1),c=this.value.slice(this.cursor);this.value=`${i}${c}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let i=this.value.slice(0,this.cursor),c=this.value.slice(this.cursor+1);this.value=`${i}${c}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return this.cursor===0||this.placeholder&&this.cursor===1}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(t.down(r(this.outputError,this.out.columns)-1)+v(this.outputError,this.out.columns)),this.out.write(v(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[h.symbol(this.done,this.aborted),e.bold(this.msg),h.delimiter(this.done),this.red?e.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((i,c,p)=>i+`
${p?" ":m.pointerSmall} ${e.red().italic(c)}`,"")),this.out.write(a.line+t.to(0)+this.outputText+t.save+this.outputError+t.restore+t.move(this.cursorOffset,0)))}}return Be=n,Be}var Je,di;function xr(){if(di)return Je;di=1;const e=_(),s=L(),{style:a,clear:t,figures:h,wrap:v,entriesToDisplay:r}=F(),{cursor:m}=R();class n extends s{constructor(i={}){super(i),this.msg=i.message,this.hint=i.hint||"- Use arrow-keys. Return to submit.",this.warn=i.warn||"- This option is disabled",this.cursor=i.initial||0,this.choices=i.choices.map((c,p)=>(typeof c=="string"&&(c={title:c,value:p}),{title:c&&(c.title||c.value||c),value:c&&(c.value===void 0?p:c.value),description:c&&c.description,selected:c&&c.selected,disabled:c&&c.disabled})),this.optionsPerPage=i.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=t("",this.out.columns),this.render()}moveCursor(i){this.cursor=i,this.value=this.choices[i].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){this.cursor===0?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(i,c){if(i===" ")return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(m.hide):this.out.write(t(this.outputText,this.out.columns)),super.render();let{startIndex:i,endIndex:c}=r(this.cursor,this.choices.length,this.optionsPerPage);if(this.outputText=[a.symbol(this.done,this.aborted),e.bold(this.msg),a.delimiter(!1),this.done?this.selection.title:this.selection.disabled?e.yellow(this.warn):e.gray(this.hint)].join(" "),!this.done){this.outputText+=`
`;for(let p=i;p<c;p++){let o,u,b="",g=this.choices[p];p===i&&i>0?u=h.arrowUp:p===c-1&&c<this.choices.length?u=h.arrowDown:u=" ",g.disabled?(o=this.cursor===p?e.gray().underline(g.title):e.strikethrough().gray(g.title),u=(this.cursor===p?e.bold().gray(h.pointer)+" ":"  ")+u):(o=this.cursor===p?e.cyan().underline(g.title):g.title,u=(this.cursor===p?e.cyan(h.pointer)+" ":"  ")+u,g.description&&this.cursor===p&&(b=` - ${g.description}`,(u.length+o.length+b.length>=this.out.columns||g.description.split(/\r?\n/).length>1)&&(b=`
`+v(g.description,{margin:3,width:this.out.columns})))),this.outputText+=`${u} ${o}${e.gray(b)}
`}}this.out.write(this.outputText)}}return Je=n,Je}var ze,fi;function $r(){if(fi)return ze;fi=1;const e=_(),s=L(),{style:a,clear:t}=F(),{cursor:h,erase:v}=R();class r extends s{constructor(n={}){super(n),this.msg=n.message,this.value=!!n.initial,this.active=n.active||"on",this.inactive=n.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}deactivate(){if(this.value===!1)return this.bell();this.value=!1,this.render()}activate(){if(this.value===!0)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(n,l){if(n===" ")this.value=!this.value;else if(n==="1")this.value=!0;else if(n==="0")this.value=!1;else return this.bell();this.render()}render(){this.closed||(this.firstRender?this.out.write(h.hide):this.out.write(t(this.outputText,this.out.columns)),super.render(),this.outputText=[a.symbol(this.done,this.aborted),e.bold(this.msg),a.delimiter(this.done),this.value?this.inactive:e.cyan().underline(this.inactive),e.gray("/"),this.value?e.cyan().underline(this.active):this.active].join(" "),this.out.write(v.line+h.to(0)+this.outputText))}}return ze=r,ze}var Ke,pi;function Y(){if(pi)return Ke;pi=1;class e{constructor({token:a,date:t,parts:h,locales:v}){this.token=a,this.date=t||new Date,this.parts=h||[this],this.locales=v||{}}up(){}down(){}next(){const a=this.parts.indexOf(this);return this.parts.find((t,h)=>h>a&&t instanceof e)}setTo(a){}prev(){let a=[].concat(this.parts).reverse();const t=a.indexOf(this);return a.find((h,v)=>v>t&&h instanceof e)}toString(){return String(this.date)}}return Ke=e,Ke}var We,mi;function Sr(){if(mi)return We;mi=1;const e=Y();class s extends e{constructor(t={}){super(t)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let t=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?t.toUpperCase():t}}return We=s,We}var Ze,gi;function Mr(){if(gi)return Ze;gi=1;const e=Y(),s=t=>(t=t%10,t===1?"st":t===2?"nd":t===3?"rd":"th");class a extends e{constructor(h={}){super(h)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(h){this.date.setDate(parseInt(h.substr(-2)))}toString(){let h=this.date.getDate(),v=this.date.getDay();return this.token==="DD"?String(h).padStart(2,"0"):this.token==="Do"?h+s(h):this.token==="d"?v+1:this.token==="ddd"?this.locales.weekdaysShort[v]:this.token==="dddd"?this.locales.weekdays[v]:h}}return Ze=a,Ze}var Qe,vi;function Or(){if(vi)return Qe;vi=1;const e=Y();class s extends e{constructor(t={}){super(t)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(t){this.date.setHours(parseInt(t.substr(-2)))}toString(){let t=this.date.getHours();return/h/.test(this.token)&&(t=t%12||12),this.token.length>1?String(t).padStart(2,"0"):t}}return Qe=s,Qe}var Xe,bi;function Pr(){if(bi)return Xe;bi=1;const e=Y();class s extends e{constructor(t={}){super(t)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(t){this.date.setMilliseconds(parseInt(t.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}}return Xe=s,Xe}var et,wi;function Tr(){if(wi)return et;wi=1;const e=Y();class s extends e{constructor(t={}){super(t)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(t){this.date.setMinutes(parseInt(t.substr(-2)))}toString(){let t=this.date.getMinutes();return this.token.length>1?String(t).padStart(2,"0"):t}}return et=s,et}var tt,yi;function _r(){if(yi)return tt;yi=1;const e=Y();class s extends e{constructor(t={}){super(t)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(t){t=parseInt(t.substr(-2))-1,this.date.setMonth(t<0?0:t)}toString(){let t=this.date.getMonth(),h=this.token.length;return h===2?String(t+1).padStart(2,"0"):h===3?this.locales.monthsShort[t]:h===4?this.locales.months[t]:String(t+1)}}return tt=s,tt}var it,xi;function Rr(){if(xi)return it;xi=1;const e=Y();class s extends e{constructor(t={}){super(t)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(t){this.date.setSeconds(parseInt(t.substr(-2)))}toString(){let t=this.date.getSeconds();return this.token.length>1?String(t).padStart(2,"0"):t}}return it=s,it}var rt,$i;function qr(){if($i)return rt;$i=1;const e=Y();class s extends e{constructor(t={}){super(t)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(t){this.date.setFullYear(t.substr(-4))}toString(){let t=String(this.date.getFullYear()).padStart(4,"0");return this.token.length===2?t.substr(-2):t}}return rt=s,rt}var st,Si;function Dr(){return Si||(Si=1,st={DatePart:Y(),Meridiem:Sr(),Day:Mr(),Hours:Or(),Milliseconds:Pr(),Minutes:Tr(),Month:_r(),Seconds:Rr(),Year:qr()}),st}var nt,Mi;function Ir(){if(Mi)return nt;Mi=1;const e=_(),s=L(),{style:a,clear:t,figures:h}=F(),{erase:v,cursor:r}=R(),{DatePart:m,Meridiem:n,Day:l,Hours:i,Milliseconds:c,Minutes:p,Month:o,Seconds:u,Year:b}=Dr(),g=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,f={1:({token:x})=>x.replace(/\\(.)/g,"$1"),2:x=>new l(x),3:x=>new o(x),4:x=>new b(x),5:x=>new n(x),6:x=>new i(x),7:x=>new p(x),8:x=>new u(x),9:x=>new c(x)},d={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};class w extends s{constructor(y={}){super(y),this.msg=y.message,this.cursor=0,this.typed="",this.locales=Object.assign(d,y.locales),this._date=y.initial||new Date,this.errorMsg=y.error||"Please Enter A Valid Value",this.validator=y.validate||(()=>!0),this.mask=y.mask||"YYYY-MM-DD HH:mm:ss",this.clear=t("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(y){y&&this._date.setTime(y.getTime())}set mask(y){let $;for(this.parts=[];$=g.exec(y);){let O=$.shift(),S=$.findIndex(M=>M!=null);this.parts.push(S in f?f[S]({token:$[S]||O,date:this.date,parts:this.parts,locales:this.locales}):$[S]||O)}let P=this.parts.reduce((O,S)=>(typeof S=="string"&&typeof O[O.length-1]=="string"?O[O.length-1]+=S:O.push(S),O),[]);this.parts.splice(0),this.parts.push(...P),this.reset()}moveCursor(y){this.typed="",this.cursor=y,this.fire()}reset(){this.moveCursor(this.parts.findIndex(y=>y instanceof m)),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let y=await this.validator(this.value);typeof y=="string"&&(this.errorMsg=y,y=!1),this.error=!y}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let y=this.parts[this.cursor].prev();if(y==null)return this.bell();this.moveCursor(this.parts.indexOf(y)),this.render()}right(){let y=this.parts[this.cursor].next();if(y==null)return this.bell();this.moveCursor(this.parts.indexOf(y)),this.render()}next(){let y=this.parts[this.cursor].next();this.moveCursor(y?this.parts.indexOf(y):this.parts.findIndex($=>$ instanceof m)),this.render()}_(y){/\d/.test(y)&&(this.typed+=y,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(r.hide):this.out.write(t(this.outputText,this.out.columns)),super.render(),this.outputText=[a.symbol(this.done,this.aborted),e.bold(this.msg),a.delimiter(!1),this.parts.reduce((y,$,P)=>y.concat(P===this.cursor&&!this.done?e.cyan().underline($.toString()):$),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split(`
`).reduce((y,$,P)=>y+`
${P?" ":h.pointerSmall} ${e.red().italic($)}`,"")),this.out.write(v.line+r.to(0)+this.outputText))}}return nt=w,nt}var ot,Oi;function Cr(){if(Oi)return ot;Oi=1;const e=_(),s=L(),{cursor:a,erase:t}=R(),{style:h,figures:v,clear:r,lines:m}=F(),n=/[0-9]/,l=p=>p!==void 0,i=(p,o)=>{let u=Math.pow(10,o);return Math.round(p*u)/u};class c extends s{constructor(o={}){super(o),this.transform=h.render(o.style),this.msg=o.message,this.initial=l(o.initial)?o.initial:"",this.float=!!o.float,this.round=o.round||2,this.inc=o.increment||1,this.min=l(o.min)?o.min:-1/0,this.max=l(o.max)?o.max:1/0,this.errorMsg=o.error||"Please Enter A Valid Value",this.validator=o.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(o){!o&&o!==0?(this.placeholder=!0,this.rendered=e.gray(this.transform.render(`${this.initial}`)),this._value=""):(this.placeholder=!1,this.rendered=this.transform.render(`${i(o,this.round)}`),this._value=i(o,this.round)),this.fire()}get value(){return this._value}parse(o){return this.float?parseFloat(o):parseInt(o)}valid(o){return o==="-"||o==="."&&this.float||n.test(o)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let o=this.value;this.value=o!==""?o:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let o=await this.validator(this.value);typeof o=="string"&&(this.errorMsg=o,o=!1),this.error=!o}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}let o=this.value;this.value=o!==""?o:this.initial,this.done=!0,this.aborted=!1,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){if(this.typed="",this.value===""&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",this.value===""&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let o=this.value.toString();if(o.length===0)return this.bell();this.value=this.parse(o=o.slice(0,-1))||"",this.value!==""&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(o,u){if(!this.valid(o))return this.bell();const b=Date.now();if(b-this.lastHit>1e3&&(this.typed=""),this.typed+=o,this.lastHit=b,this.color="cyan",o===".")return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(a.down(m(this.outputError,this.out.columns)-1)+r(this.outputError,this.out.columns)),this.out.write(r(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[h.symbol(this.done,this.aborted),e.bold(this.msg),h.delimiter(this.done),!this.done||!this.done&&!this.placeholder?e[this.color]().underline(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((o,u,b)=>o+`
${b?" ":v.pointerSmall} ${e.red().italic(u)}`,"")),this.out.write(t.line+a.to(0)+this.outputText+a.save+this.outputError+a.restore))}}return ot=c,ot}var ht,Pi;function Ti(){if(Pi)return ht;Pi=1;const e=_(),{cursor:s}=R(),a=L(),{clear:t,figures:h,style:v,wrap:r,entriesToDisplay:m}=F();class n extends a{constructor(i={}){super(i),this.msg=i.message,this.cursor=i.cursor||0,this.scrollIndex=i.cursor||0,this.hint=i.hint||"",this.warn=i.warn||"- This option is disabled -",this.minSelected=i.min,this.showMinError=!1,this.maxChoices=i.max,this.instructions=i.instructions,this.optionsPerPage=i.optionsPerPage||10,this.value=i.choices.map((c,p)=>(typeof c=="string"&&(c={title:c,value:p}),{title:c&&(c.title||c.value||c),description:c&&c.description,value:c&&(c.value===void 0?p:c.value),selected:c&&c.selected,disabled:c&&c.disabled})),this.clear=t("",this.out.columns),i.overrideRender||this.render()}reset(){this.value.map(i=>!i.selected),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter(i=>i.selected)}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){const i=this.value.filter(c=>c.selected);this.minSelected&&i.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){this.cursor===0?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(i=>i.selected).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const i=this.value[this.cursor];if(i.selected)i.selected=!1,this.render();else{if(i.disabled||this.value.filter(c=>c.selected).length>=this.maxChoices)return this.bell();i.selected=!0,this.render()}}toggleAll(){if(this.maxChoices!==void 0||this.value[this.cursor].disabled)return this.bell();const i=!this.value[this.cursor].selected;this.value.filter(c=>!c.disabled).forEach(c=>c.selected=i),this.render()}_(i,c){if(i===" ")this.handleSpaceToggle();else if(i==="a")this.toggleAll();else return this.bell()}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${h.arrowUp}/${h.arrowDown}: Highlight option
    ${h.arrowLeft}/${h.arrowRight}/[space]: Toggle selection
`+(this.maxChoices===void 0?`    a: Toggle all
`:"")+"    enter/return: Complete answer":""}renderOption(i,c,p,o){const u=(c.selected?e.green(h.radioOn):h.radioOff)+" "+o+" ";let b,g;return c.disabled?b=i===p?e.gray().underline(c.title):e.strikethrough().gray(c.title):(b=i===p?e.cyan().underline(c.title):c.title,i===p&&c.description&&(g=` - ${c.description}`,(u.length+b.length+g.length>=this.out.columns||c.description.split(/\r?\n/).length>1)&&(g=`
`+r(c.description,{margin:u.length,width:this.out.columns})))),u+b+e.gray(g||"")}paginateOptions(i){if(i.length===0)return e.red("No matches for this query.");let{startIndex:c,endIndex:p}=m(this.cursor,i.length,this.optionsPerPage),o,u=[];for(let b=c;b<p;b++)b===c&&c>0?o=h.arrowUp:b===p-1&&p<i.length?o=h.arrowDown:o=" ",u.push(this.renderOption(this.cursor,i[b],b,o));return`
`+u.join(`
`)}renderOptions(i){return this.done?"":this.paginateOptions(i)}renderDoneOrInstructions(){if(this.done)return this.value.filter(c=>c.selected).map(c=>c.title).join(", ");const i=[e.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&i.push(e.yellow(this.warn)),i.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(s.hide),super.render();let i=[v.symbol(this.done,this.aborted),e.bold(this.msg),v.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(i+=e.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),i+=this.renderOptions(this.value),this.out.write(this.clear+i),this.clear=t(i,this.out.columns)}}return ht=n,ht}var lt,_i;function Ar(){if(_i)return lt;_i=1;const e=_(),s=L(),{erase:a,cursor:t}=R(),{style:h,clear:v,figures:r,wrap:m,entriesToDisplay:n}=F(),l=(o,u)=>o[u]&&(o[u].value||o[u].title||o[u]),i=(o,u)=>o[u]&&(o[u].title||o[u].value||o[u]),c=(o,u)=>{const b=o.findIndex(g=>g.value===u||g.title===u);return b>-1?b:void 0};class p extends s{constructor(u={}){super(u),this.msg=u.message,this.suggest=u.suggest,this.choices=u.choices,this.initial=typeof u.initial=="number"?u.initial:c(u.choices,u.initial),this.select=this.initial||u.cursor||0,this.i18n={noMatches:u.noMatches||"no matches found"},this.fallback=u.fallback||this.initial,this.clearFirst=u.clearFirst||!1,this.suggestions=[],this.input="",this.limit=u.limit||10,this.cursor=0,this.transform=h.render(u.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=v("",this.out.columns),this.complete(this.render),this.render()}set fallback(u){this._fb=Number.isSafeInteger(parseInt(u))?parseInt(u):u}get fallback(){let u;return typeof this._fb=="number"?u=this.choices[this._fb]:typeof this._fb=="string"&&(u={title:this._fb}),u||this._fb||{title:this.i18n.noMatches}}moveSelect(u){this.select=u,this.suggestions.length>0?this.value=l(this.suggestions,u):this.value=this.fallback.value,this.fire()}async complete(u){const b=this.completing=this.suggest(this.input,this.choices),g=await b;if(this.completing!==b)return;this.suggestions=g.map((d,w,x)=>({title:i(x,w),value:l(x,w),description:d.description})),this.completing=!1;const f=Math.max(g.length-1,0);this.moveSelect(Math.min(f,this.select)),u&&u()}reset(){this.input="",this.complete(()=>{this.moveSelect(this.initial!==void 0?this.initial:0),this.render()}),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(u,b){let g=this.input.slice(0,this.cursor),f=this.input.slice(this.cursor);this.input=`${g}${u}${f}`,this.cursor=g.length+1,this.complete(this.render),this.render()}delete(){if(this.cursor===0)return this.bell();let u=this.input.slice(0,this.cursor-1),b=this.input.slice(this.cursor);this.input=`${u}${b}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let u=this.input.slice(0,this.cursor),b=this.input.slice(this.cursor+1);this.input=`${u}${b}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){this.select===0?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(u,b,g,f){let d,w=g?r.arrowUp:f?r.arrowDown:" ",x=b?e.cyan().underline(u.title):u.title;return w=(b?e.cyan(r.pointer)+" ":"  ")+w,u.description&&(d=` - ${u.description}`,(w.length+x.length+d.length>=this.out.columns||u.description.split(/\r?\n/).length>1)&&(d=`
`+m(u.description,{margin:3,width:this.out.columns}))),w+" "+x+e.gray(d||"")}render(){if(this.closed)return;this.firstRender?this.out.write(t.hide):this.out.write(v(this.outputText,this.out.columns)),super.render();let{startIndex:u,endIndex:b}=n(this.select,this.choices.length,this.limit);if(this.outputText=[h.symbol(this.done,this.aborted,this.exited),e.bold(this.msg),h.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const g=this.suggestions.slice(u,b).map((f,d)=>this.renderOption(f,this.select===d+u,d===0&&u>0,d+u===b-1&&b<this.choices.length)).join(`
`);this.outputText+=`
`+(g||e.gray(this.fallback.title))}this.out.write(a.line+t.to(0)+this.outputText)}}return lt=p,lt}var ut,Ri;function Er(){if(Ri)return ut;Ri=1;const e=_(),{cursor:s}=R(),a=Ti(),{clear:t,style:h,figures:v}=F();class r extends a{constructor(n={}){n.overrideRender=!0,super(n),this.inputValue="",this.clear=t("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){this.cursor===0?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(n=>n.selected).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const n=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter(i=>this.inputValue?!!(typeof i.title=="string"&&i.title.toLowerCase().includes(this.inputValue.toLowerCase())||typeof i.value=="string"&&i.value.toLowerCase().includes(this.inputValue.toLowerCase())):!0);const l=this.filteredOptions.findIndex(i=>i===n);this.cursor=l<0?0:l,this.render()}handleSpaceToggle(){const n=this.filteredOptions[this.cursor];if(n.selected)n.selected=!1,this.render();else{if(n.disabled||this.value.filter(l=>l.selected).length>=this.maxChoices)return this.bell();n.selected=!0,this.render()}}handleInputChange(n){this.inputValue=this.inputValue+n,this.updateFilteredOptions()}_(n,l){n===" "?this.handleSpaceToggle():this.handleInputChange(n)}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${v.arrowUp}/${v.arrowDown}: Highlight option
    ${v.arrowLeft}/${v.arrowRight}/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer
`:""}renderCurrentInput(){return`
Filtered results for: ${this.inputValue?this.inputValue:e.gray("Enter something to filter")}
`}renderOption(n,l,i){let c;return l.disabled?c=n===i?e.gray().underline(l.title):e.strikethrough().gray(l.title):c=n===i?e.cyan().underline(l.title):l.title,(l.selected?e.green(v.radioOn):v.radioOff)+"  "+c}renderDoneOrInstructions(){if(this.done)return this.value.filter(l=>l.selected).map(l=>l.title).join(", ");const n=[e.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&n.push(e.yellow(this.warn)),n.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(s.hide),super.render();let n=[h.symbol(this.done,this.aborted),e.bold(this.msg),h.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(n+=e.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),n+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+n),this.clear=t(n,this.out.columns)}}return ut=r,ut}var at,qi;function jr(){if(qi)return at;qi=1;const e=_(),s=L(),{style:a,clear:t}=F(),{erase:h,cursor:v}=R();class r extends s{constructor(n={}){super(n),this.msg=n.message,this.value=n.initial,this.initialValue=!!n.initial,this.yesMsg=n.yes||"yes",this.yesOption=n.yesOption||"(Y/n)",this.noMsg=n.no||"no",this.noOption=n.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(n,l){return n.toLowerCase()==="y"?(this.value=!0,this.submit()):n.toLowerCase()==="n"?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(v.hide):this.out.write(t(this.outputText,this.out.columns)),super.render(),this.outputText=[a.symbol(this.done,this.aborted),e.bold(this.msg),a.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:e.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(h.line+v.to(0)+this.outputText))}}return at=r,at}var ct,Di;function kr(){return Di||(Di=1,ct={TextPrompt:yr(),SelectPrompt:xr(),TogglePrompt:$r(),DatePrompt:Ir(),NumberPrompt:Cr(),MultiselectPrompt:Ti(),AutocompletePrompt:Ar(),AutocompleteMultiselectPrompt:Er(),ConfirmPrompt:jr()}),ct}var Ii;function Fr(){return Ii||(Ii=1,function(e){const s=e,a=kr(),t=r=>r;function h(r,m,n={}){return new Promise((l,i)=>{const c=new a[r](m),p=n.onAbort||t,o=n.onSubmit||t,u=n.onExit||t;c.on("state",m.onState||t),c.on("submit",b=>l(o(b))),c.on("exit",b=>l(u(b))),c.on("abort",b=>i(p(b)))})}s.text=r=>h("TextPrompt",r),s.password=r=>(r.style="password",s.text(r)),s.invisible=r=>(r.style="invisible",s.text(r)),s.number=r=>h("NumberPrompt",r),s.date=r=>h("DatePrompt",r),s.confirm=r=>h("ConfirmPrompt",r),s.list=r=>{const m=r.separator||",";return h("TextPrompt",r,{onSubmit:n=>n.split(m).map(l=>l.trim())})},s.toggle=r=>h("TogglePrompt",r),s.select=r=>h("SelectPrompt",r),s.multiselect=r=>{r.choices=[].concat(r.choices||[]);const m=n=>n.filter(l=>l.selected).map(l=>l.value);return h("MultiselectPrompt",r,{onAbort:m,onSubmit:m})},s.autocompleteMultiselect=r=>{r.choices=[].concat(r.choices||[]);const m=n=>n.filter(l=>l.selected).map(l=>l.value);return h("AutocompleteMultiselectPrompt",r,{onAbort:m,onSubmit:m})};const v=(r,m)=>Promise.resolve(m.filter(n=>n.title.slice(0,r.length).toLowerCase()===r.toLowerCase()));s.autocomplete=r=>(r.suggest=r.suggest||v,r.choices=[].concat(r.choices||[]),h("AutocompletePrompt",r))}(Ae)),Ae}var dt,Ci;function Nr(){if(Ci)return dt;Ci=1;const e=Fr(),s=["suggest","format","onState","validate","onRender","type"],a=()=>{};async function t(m=[],{onSubmit:n=a,onCancel:l=a}={}){const i={},c=t._override||{};m=[].concat(m);let p,o,u,b,g,f;const d=async(w,x,y=!1)=>{if(!(!y&&w.validate&&w.validate(x)!==!0))return w.format?await w.format(x,i):x};for(o of m)if({name:b,type:g}=o,typeof g=="function"&&(g=await g(p,{...i},o),o.type=g),!!g){for(let w in o){if(s.includes(w))continue;let x=o[w];o[w]=typeof x=="function"?await x(p,{...i},f):x}if(f=o,typeof o.message!="string")throw new Error("prompt message is required");if({name:b,type:g}=o,e[g]===void 0)throw new Error(`prompt type (${g}) is not defined`);if(c[o.name]!==void 0&&(p=await d(o,c[o.name]),p!==void 0)){i[b]=p;continue}try{p=t._injected?h(t._injected,o.initial):await e[g](o),i[b]=p=await d(o,p,!0),u=await n(o,p,i)}catch{u=!await l(o,i)}if(u)return i}return i}function h(m,n){const l=m.shift();if(l instanceof Error)throw l;return l===void 0?n:l}function v(m){t._injected=(t._injected||[]).concat(m)}function r(m){t._override=Object.assign({},m)}return dt=Object.assign(t,{prompt:t,prompts:e,inject:v,override:r}),dt}function Yr(e){e=(Array.isArray(e)?e:e.split(".")).map(Number);let s=0,a=process.versions.node.split(".").map(Number);for(;s<e.length;s++){if(a[s]>e[s])return!1;if(e[s]>a[s])return!0}return!1}var Hr=Yr("8.6.0")?fr():Nr();let G=!0;const J=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let Ai=0;if(J.process&&J.process.env&&J.process.stdout){const{FORCE_COLOR:e,NODE_DISABLE_COLORS:s,TERM:a}=J.process.env;s||e==="0"?G=!1:e==="1"?G=!0:a==="dumb"?G=!1:"CI"in J.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(t=>t in J.process.env)?G=!0:G=process.stdout.isTTY,G&&(Ai=a&&a.endsWith("-256color")?2:1)}let Ei={enabled:G,supportLevel:Ai};function W(e,s,a=1){const t=`\x1B[${e}m`,h=`\x1B[${s}m`,v=new RegExp(`\\x1b\\[${s}m`,"g");return r=>Ei.enabled&&Ei.supportLevel>=a?t+(""+r).replace(v,t)+h:""+r}const ji=W(31,39),ki=W(32,39),Z=W(36,39),Lr=W(90,39),ft=["vite-ts","vite-js"],U=Hi({"--help":Boolean,"--template":String,"--list":Boolean,"-h":"--help","-t":"--template","-l":"--list"});U["--list"]&&(console.log(`
`),ft.map(e=>console.log(ki(`${e}`))),console.log(`
`),process.exit(0)),(U["--help"]||!U._[0])&&(console.log(`
    ${Z("create-lens-app")} - Create Lens App in one command \u26A1

    USAGE
       $ ${Z("create-lens-app")} --help
       $ ${Z("create-lens-app")} <my-app>
       $ ${Z("create-lens-app")} <my-app> [--template <template-name>]
      
    OPTIONS
      --help,      -h        shows this help message
      --template,  -t        sets the template
      --list,      -l        lists all template
  `),process.exit(0));const Vr=e=>{try{Ni(`${e}`,{stdio:"inherit"})}catch(s){console.log(`Failed to execute ${e}`,s),process.exit(1)}},Gr=e=>/^(?:@[a-z\d\-*~][a-z\d\-*._~]*\/)?[a-z\d\-~][a-z\d\-._~]*$/.test(e),Fi=process.cwd(),pt=V.join(Fi,U._[0]);Gr(U._[0])||(console.log(ji("Invalid Project name!")),process.exit(1)),Hr({type:"select",name:"template",message:"Choose a template:",choices:ft}).then(e=>{const s=U["--template"]||e.template||"vite-js";ft.includes(s)||(console.log(ji(`Template not found: ${s}`)),process.exit(1)),console.log(`

\u{1F33F} Creating Lens project`);const a=V.resolve(Fi,pt);z.mkdirSync(a,{recursive:!0}),console.log(`\u{1F4E6} Using template ${s}`);const t=V.resolve(Yi(import.meta.url),"../",`../templates/${s}`);z.cpSync(t,a,{recursive:!0,force:!0}),z.renameSync(V.join(a,"_gitignore"),V.join(a,".gitignore"));const h=JSON.parse(z.readFileSync(V.join(a,"package.json"),"utf-8"));h.name=U._[0],z.writeFileSync(V.join(a,"package.json"),JSON.stringify(h,null,2)),console.log(`\u{1F300} Installing dependencies for ${pt}`);const v=`cd ${pt} && npm install`;Vr(v),console.log(ki`\nOK BLOOMER  Your app is ready!`),console.log(Lr(`
Created Lens project at ${a}`))}).catch(e=>{console.log(e),process.exit(1)});
